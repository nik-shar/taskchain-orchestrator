org: northstar-metrics
repositories:
  - name: saas-api
    default_branch: main
  - name: saas-web
    default_branch: main
  - name: data-pipelines
    default_branch: main
workflows:
  - name: ci-test
    trigger: [pull_request]
    required_checks:
      - unit-tests
      - integration-tests
      - lint
  - name: prod-deploy
    trigger: [workflow_dispatch, push]
    environment: production
    required_approvals: 2
    requires_change_ticket: true
    requires_oncall_ack: true
  - name: rollback-deploy
    trigger: [workflow_dispatch]
    environment: production
    required_approvals: 1
environment_protections:
  production:
    wait_timer_minutes: 10
    reviewers:
      - sre-leads
      - platform-managers
audit:
  post_status_channel: "#audit-ops"
  include_run_url_in_jira: true
